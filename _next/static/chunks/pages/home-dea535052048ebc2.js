(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{9649:function(e,t,n){"use strict";var r=n(9499),i=n(4730),c=n(7294),o=n(1664),a=n.n(o),s=n(1163),l=n(293),u=n(5893),d=["href","omitParams"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.Z=(0,c.forwardRef)(function(e,t){var n=e.href,r=e.omitParams,c=(0,i.Z)(e,d),o=(0,s.useRouter)();return(0,u.jsx)(a(),_objectSpread(_objectSpread({},c),{},{ref:t,href:(0,l.WV)(o.asPath,n.toString(),r)}))})},3781:function(e,t,n){"use strict";n.d(t,{Z:function(){return Footer}});var r=n(7294),i=n(6896),c=n(1752),o=n.n(c),a=n(329),s=n.n(a),l=n(5893),Imprint=function(e){var t=e.setModal,n=(0,i.Z)().formatMessage,hideModal=function(){t(!1),document.body.style.overflow="auto";var e=document.getElementsByTagName("html")[0];e.style.overflow="auto",e.style.position="unset",e.style.height="unset"};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{onClick:function(){return hideModal()},className:s().overlay}),(0,l.jsx)("div",{className:"".concat(s().colorPickerWrap),children:(0,l.jsx)("div",{className:s().colorPickerContainer,children:(0,l.jsxs)("div",{className:"".concat(s().colorPicker," ").concat(s().imprint),children:[(0,l.jsx)("h2",{children:n({id:"app.footer.imprint"})}),(0,l.jsxs)("div",{className:"".concat(s().imprintMain),children:[(0,l.jsx)("div",{children:n({id:"app.footer.line1"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line2"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line3"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line4"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line5"})}),(0,l.jsxs)("div",{className:"mt-[50px]",children:[(0,l.jsx)("div",{children:n({id:"app.footer.line6"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line7"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line8"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line9"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line10"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line11"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line12"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line13"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line14"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line15"})}),(0,l.jsx)("div",{children:n({id:"app.footer.line16"})})]})]}),(0,l.jsx)("button",{onClick:function(){hideModal()},className:s().ctaBtn,children:n({id:"app.text.close"})})]})})})]})};function Footer(){var e=o()().publicRuntimeConfig,t=(0,r.useState)(!1),n=t[0],c=t[1],a=(0,i.Z)().formatMessage;return(0,l.jsxs)("div",{className:"w-full grid justify-items-center",children:[(0,l.jsxs)("div",{className:"flex px-2 py-6 opacity-50 justify-between w-full max-w-[600px]",children:[(0,l.jsx)("button",{className:"underline text-left",onClick:function(){c(!0),document.body.style.overflow="hidden";var e=document.getElementsByTagName("html")[0];e.style.overflow="hidden",e.style.position="relative",e.style.height="100%"},children:a({id:"app.footer.imprint"})}),(0,l.jsx)("div",{className:"text-center",children:a({id:"app.footer.caption"})}),(0,l.jsxs)("div",{className:"text-right",children:["v. ",null==e?void 0:e.version]})]}),n&&(0,l.jsx)(Imprint,{setModal:c})]})}},3785:function(e,t,n){"use strict";var r=n(9473),i=n(8010),c=n(8663),o=n(1493),a=n(9479),s=n(4321),l=n(7371),u=n(9059),d=n(2616),h=n(5336),p=n(2653),f=n(6896),v=n(9671),m=n(9649),x=n(2010),g=n(1163),b=n(293),j=n(5893);t.Z=function(){var e=(0,r.I0)(),t=(0,g.useRouter)(),n=(0,f.Z)().formatMessage,w=(0,c.S)(),y=(0,x.F)().theme;return(0,j.jsx)("div",{className:"w-full max-w-[600px] self-center",children:(0,j.jsxs)(o.R,{classNames:{wrapper:"px-2"},className:"bg-transparent backdrop-saturate-100 backdrop-blur-none",children:[(0,j.jsx)(a.U,{justify:"start",children:(0,j.jsxs)(s.F,{className:"p-0",children:[(0,j.jsx)(l.S,{className:"appearance-none",children:(0,j.jsx)("div",{children:(0,j.jsx)(v.Z,{icon:"ic_burger",className:"stroke-[60px] fill-white round-svg",size:40})})}),(0,j.jsx)(u.a,{"aria-label":"Static Actions",className:"justify-self-end",children:(0,j.jsx)(d.W,{onPress:function(){e((0,i.kS)())},children:n({id:"app.text.logout"})},"logout")})]})}),(0,j.jsx)(a.U,{justify:"center",children:(0,j.jsx)(h.H,{children:null!=w&&w.logo?(0,j.jsx)(p.J,{src:(0,b.Fc)("/".concat(null==w?void 0:w.logo)),width:w.logoWidth,height:w.logoHeight,alt:"logo",radius:"none"}):(0,j.jsx)(v.Z,{icon:"ic_meshle-full",size:55})})}),(0,j.jsx)(a.U,{justify:"end",children:"dh"===y&&(0,j.jsx)(m.Z,{href:"/floor-plan"===t.pathname?"/home":"/floor-plan",children:(0,j.jsx)(v.Z,{icon:"/floor-plan"===t.pathname?"ic_menu":"ic_floorplan",size:24})})})]})})}},8663:function(e,t,n){"use strict";n.d(t,{S:function(){return useVars}});var r=n(7294),i=n(4626),useVars=function(){return r.useContext(i.c)}},8773:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return home}});var r=n(9499),i=n(29),c=n(6835),o=n(7794),a=n.n(o),s=n(7294),l=n(9473),u=n(3785),d=n(3781),h=n(5192),p=n(6896),f=n(4219),v=n(3091),m=n(8266),x=n(1184),g=n(9671),b=n(5893),CategoryList=function(e){var t=e.category,n=e.setCategory,r=e.availableCategories,i=(0,p.Z)().formatMessage,c=s.useCallback(function(e){switch(e){case x.$.light:return"ic_bulb_off";case x.$.switch:return"ic_switch_double";case x.$.shutter:return"ic_shutter";case x.$.heating:return"ic_multi_sensor";default:return""}},[]),o=s.useCallback(function(e){switch(e){case x.$.light:return i({id:"app.device.lights.title"});case x.$.switch:return i({id:"app.device.switches.title"});case x.$.shutter:return i({id:"app.device.shutter.title"});case x.$.heating:return i({id:"app.device.heating.title"});default:return""}},[i]);return(0,b.jsx)(f.o,{orientation:"horizontal",className:"overflow-auto",hideScrollBar:!0,children:(0,b.jsx)(v.X,{"aria-label":"groups",variant:"bordered",className:"grid",classNames:{list:"grid grid-flow-col gap-5 auto-cols-min"},children:r.map(function(e){return(0,b.jsx)(m.R,{className:"border-none p-0 w-max outline-none",classNames:{base:"data-[focus-visible=true]:outline-none!"},onPress:function(){return n(e)},selectedIcon:(0,b.jsx)("div",{}),textValue:e+"",children:(0,b.jsxs)("div",{className:"grid gap-1",children:[(0,b.jsx)("div",{className:"max-w-fit	hover:bg-background/40 bg-background/10 p-4 ".concat(t===e?"bg-background/30":"","\n            rounded-md items-center"),children:(0,b.jsx)(g.Z,{size:40,icon:c(e),className:e===t?"text-white":"text-white/30"})}),(0,b.jsx)("h3",{className:"text-center text-md ".concat(t===e?"text-white":"text-white/30 "),children:o(e)})]})},e)})})})},j=n(7812),w=n(4730),y=n(7490),O=n(47),_=n(101),C=n(5903);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Pointer=function(e){var t=e.className,n=e.color,r=e.left,i=e.top,c=e.style,o=e.prefixCls,a=_objectSpread(_objectSpread({},c),{},{position:"absolute",top:i,left:r}),s="".concat(o,"-pointer ").concat(t||"");return(0,b.jsx)("div",{className:s,style:a,children:(0,b.jsx)("div",{className:"".concat(o,"-fill"),style:{width:10,height:10,transform:"translate(-5px, -5px)",boxShadow:"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",borderRadius:"50%",backgroundColor:"#fff"},children:(0,b.jsx)("div",{style:{inset:0,borderRadius:"50%",position:"absolute",backgroundColor:n}})})})},S=n(6486),I=2*Math.PI;function getWheelDimensions(e){var t=e.width,n=void 0===t?0:t,r=n/2;return{width:n,radius:r,cx:r,cy:r}}function getHandleRange(e){var t=e.width;return(void 0===t?0:t)/2}function translateWheelAngle(e,t,n){var r=e.angle||0,i=e.direction;return n&&"clockwise"===i?t=r+t:"clockwise"===i?t=360-r+t:n&&"anticlockwise"===i?t=r+180-t:"anticlockwise"===i&&(t=r-t),(t%360+360)%360}var cctAngleToWhiteBalance=function(e){var t=(0,S.merge)({},e);return e.h<=180?t.h=(0,S.clamp)(127.5*((100-e.s)/100),0,127.5):t.h=(0,S.clamp)(255*(e.s/100),127.5,255),t},hclToRgb=function(e){var t,n;return(e=34+e/100*66)<=66?(t=255,n=Math.min(Math.max(99.4708025861*Math.log(e)-161.1195681661,0),255)):(t=Math.min(Math.max(329.698727446*Math.pow(e-60,-.1332047592),0),255),n=Math.min(Math.max(288.1221695283*Math.pow(e-60,-.0755148492),0),255)),[Math.round(t),Math.round(n),Math.round(e>=66?255:e<=19?0:Math.min(Math.max(138.5177312231*Math.log(e-10)-305.0447927307,0),255))]},N=n(293),k=["prefixCls","radius","pointer","className","style","width","height","direction","angle","color","onChange"];function hcl_color_wheel_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hcl_color_wheel_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hcl_color_wheel_ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hcl_color_wheel_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=s.forwardRef(function(e,t){var n,r,i,c,o,a,l,u,d=e.prefixCls,h=void 0===d?"w-color-wheel":d,p=(e.radius,e.pointer),f=e.className,v=e.style,m=e.width,x=void 0===m?200:m,g=e.height,j=void 0===g?200:g,y=e.direction,S=e.angle,P=e.color,M=e.onChange,T=(0,w.Z)(e,k),D="string"==typeof P&&(0,_.Ff)(P)?(0,O.HW)(P):P||{},Z=cctAngleToWhiteBalance(D),E=hclToRgb(100*(0,N.et)(Z.h,0,255,0,1)),R=P?(0,O.s)({r:E[0],g:E[1],b:E[2],a:D.a}):"",B=(i=(r=getWheelDimensions(n={width:x})).cx,c=r.cy,o=getHandleRange(n),a=(180+translateWheelAngle(n,D.h,!0))*(I/360),{x:i+(l=D.s/100*o)*Math.cos(a)*(u="clockwise"===n.direction?-1:1),y:c+l*Math.sin(a)*u}),handleChange=function(e,t){var n,r,i,c,o,a,s,l,u,d,h,p=(n={width:x},r=x-e.x,i=j-e.y,o=(c=getWheelDimensions(n)).cx,a=c.cy,s=getHandleRange(n),r=o-r,l=translateWheelAngle(n,Math.atan2(-(i=a-i),-r)*(360/I)),h=Math.min(Math.sqrt((u=r)*u+(d=i)*d),s),{h:Math.round(l),s:Math.round(100/s*h)}),f={h:p.h,s:p.s,v:D.v,a:D.a};M&&M((0,O.$_)(f))};return(0,b.jsxs)(C.ZP,hcl_color_wheel_objectSpread(hcl_color_wheel_objectSpread({className:[h,f||""].filter(Boolean).join(" ")},T),{},{style:hcl_color_wheel_objectSpread({position:"relative",width:x,height:j},v),ref:t,onMove:handleChange,onDown:handleChange,children:[s.createElement(p||Pointer,hcl_color_wheel_objectSpread({prefixCls:h,style:{zIndex:1,transform:"translate(".concat(B.x,"px, ").concat(B.y,"px)")}},{top:"0",left:"0",color:R})),(0,b.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"anticlockwise"===(void 0===y?"anticlockwise":y)?"linear-gradient(hsl(213, 100%, 73%), hsl(25, 100%, 73%))":"linear-gradient(to bottom, #409cff 0%, #fffffb 50%, #ff6c00 100%)",transform:"rotateZ(".concat((void 0===S?90:S)+90,"deg)"),inset:0}}),(0,b.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"radial-gradient(circle closest-side, #fff, transparent)",inset:0}}),(0,b.jsx)("div",{style:{backgroundColor:"#000",borderRadius:"50%",position:"absolute",inset:0,opacity:"number"==typeof D.v?1-D.v/100:0}})]}))});P.displayName="Hcl-Wheel";var M=n(8742),T=n(2590),D=n(7740),Z=n(6597),E=n(787),R=n(9505),B=n(5935),G=n(6476),K=n(7635),W=n(9755),H=n.n(W),hsvToRgb=function(e,t,n){var r,i,c,o=Math.floor(6*e),a=6*e-o,s=n*(1-t),l=n*(1-a*t),u=n*(1-(1-a)*t);switch(o%6){case 0:r=n,i=u,c=s;break;case 1:r=l,i=n,c=s;break;case 2:r=s,i=n,c=u;break;case 3:r=s,i=l,c=n;break;case 4:r=u,i=s,c=n;break;default:r=n,i=s,c=l}return[Math.round(255*r),Math.round(255*i),Math.round(255*c)]},z=["hclPicker","name","onHclChange","onHsvChange","usedColor","setBrightness","brightness","deviceType"];function ColorPicker_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ColorPicker_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ColorPicker_ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ColorPicker_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var components_ColorPicker=function(e){var t=e.hclPicker,n=e.name,r=e.onHclChange,i=e.onHsvChange,o=e.usedColor,a=e.setBrightness,l=e.brightness,u=e.deviceType,d=(0,w.Z)(e,z),h=(0,s.useState)(t?"hcl":"hsv"),f=h[0],v=h[1],m=(0,s.useState)((0,O.HW)(o)),g=m[0],j=m[1],_=(0,s.useState)((0,O.HW)(o)),C=_[0],S=_[1],I=(0,s.useState)(0),N=I[0],k=I[1],W=(0,p.Z)().formatMessage;(0,s.useEffect)(function(){k(l)},[l]);var _onHsvChange=function(e){j(ColorPicker_objectSpread({},e.hsva))},_onHclChange=function(e){S(ColorPicker_objectSpread({},e.hsva))},changeMainClr=function(){"hcl"===f?r(C):i(g)};return(0,s.useEffect)(function(){var e="hcl"===f?hclToRgb(cctAngleToWhiteBalance(C).h):hsvToRgb(g.h/360,g.s/100,1),t=(0,c.Z)(e,3),n=t[0],r=t[1],i=t[2],o=(0,O.s)({r:n,g:r,b:i,a:1});H()(".track-1").css("backgroundColor",o)},[C,g.h,g.s,f]),(0,b.jsx)(M.R,ColorPicker_objectSpread(ColorPicker_objectSpread({},d),{},{backdrop:"blur",placement:"center",hideCloseButton:!0,classNames:{base:"bg-transparent shadow-none"},children:(0,b.jsx)(T.A,{children:function(e){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.k,{className:"flex flex-col gap-1 text-white text-center",children:n}),(0,b.jsxs)(Z.I,{children:[(0,b.jsxs)(E.n,{classNames:{tabList:u!==x.Y.Multy?"hidden":""},onSelectionChange:function(e){return v(e)},defaultSelectedKey:f,"aria-label":"Options",fullWidth:!0,variant:"bordered",color:"default",children:[(0,b.jsx)(R.r,{title:"HSV",children:(0,b.jsx)("div",{onMouseUp:function(){return changeMainClr()},onTouchEnd:function(){return changeMainClr()},children:(0,b.jsx)(y.Z,{color:g,onChange:_onHsvChange,width:300,height:300})})},"hsv"),(0,b.jsx)(R.r,{title:"HCL",children:(0,b.jsx)("div",{onMouseUp:function(){return changeMainClr()},onTouchEnd:function(){return changeMainClr()},children:(0,b.jsx)(P,{color:C,onChange:_onHclChange,width:300,height:300})})},"hcl")]}),(0,b.jsx)(B.L,{step:1,maxValue:100,minValue:0,value:N,onChange:function(e){return k(e)},onChangeEnd:function(e){return a(e)},hideThumb:!0,size:"lg",classNames:{trackWrapper:"rounded-md h-[50px] border w-full overflow-hidden",track:"rounded-none h-full bg-transparent",filler:"track-1"}})]}),(0,b.jsx)(G.R,{className:"justify-center",children:(0,b.jsx)(K.A,{variant:"light",size:"lg",className:"text-white",onPress:e,children:W({id:"app.text.close"})})})]})}})}))},A=n(5338),Y=["title","value","color","coords"];function OverlaySlider_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function OverlaySlider_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OverlaySlider_ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OverlaySlider_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var OverlaySlider=function(e){var t=e.title,n=e.value,r=e.color,i=e.coords,c=(0,w.Z)(e,Y),o=s.useRef(null);return s.useEffect(function(){o.current&&(o.current.style.paddingTop=i?"".concat(i[1]-97.5,"px"):"50%")},[i]),s.useEffect(function(){H()(".overlay-slider-fill").css("backgroundColor",r),H()(".overlay-slider-fill").css("width","".concat(n,"%"))},[n,r]),(0,b.jsx)(M.R,OverlaySlider_objectSpread(OverlaySlider_objectSpread({},c),{},{backdrop:"blur",placement:"center",hideCloseButton:!0,classNames:{base:"bg-black/20 shadow-none"},size:"full",children:(0,b.jsxs)(T.A,{children:[(0,b.jsx)(D.k,{className:"flex flex-col gap-1 text-white text-center",children:t}),(0,b.jsx)(Z.I,{children:(0,b.jsx)("div",{ref:o,children:(0,b.jsx)("div",{className:"h-[65px] rounded-[10px] w-full",children:(0,b.jsx)("div",{className:"h-full bg-white overlay-slider-fill rounded-md"})})})})]})}))},F=n(1027),$=n(5120);function colorful_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function colorful_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?colorful_ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):colorful_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ColorfulItem=function(e){var t=(0,l.I0)(),n=s.useState("#ffffff"),r=(0,c.Z)(n,2),i=r[0],o=r[1],a=s.useState(0),u=(0,c.Z)(a,2),d=u[0],p=u[1],f=s.useState([0,0]),v=(0,c.Z)(f,2),m=v[0],j=v[1],w=s.useRef(null),y=s.useRef(null),_=s.useState(!1),C=(0,c.Z)(_,2),I=C[0],N=C[1],k=(0,F.q)(),P=k.isOpen,M=k.onOpen,T=k.onOpenChange,D=(0,F.q)(),Z=s.useMemo(function(){return(0,$.fp)(e.deviceType,e.multyMode)},[e.deviceType,e.multyMode]);s.useEffect(function(){I||p(e.isOn?e.brightness:0)},[e.brightness,e.isOn,I]),s.useEffect(function(){if(!e.isGroup&&!Z){var t=hsvToRgb(e.hue,e.saturation,1),n=(0,c.Z)(t,3),r=n[0],i=n[1],a=n[2];o((0,O.s)({r:r,g:i,b:a,a:1}))}},[Z,e.hue,e.isGroup,e.saturation]),s.useEffect(function(){if(!e.isGroup&&Z){var t=hclToRgb(100*e.whiteBalance),n=(0,c.Z)(t,3),r=n[0],i=n[1],a=n[2];o((0,O.s)({r:r,g:i,b:a,a:1}))}},[Z,e.isGroup,e.whiteBalance]),s.useEffect(function(){w.current&&(w.current.querySelector(".rangeslider-fill").style.backgroundColor=i)},[i]),s.useEffect(function(){y.current&&(e.isOn?y.current.style.width=d+"%":y.current.style.width="0%")},[d,e.isOn]);var E=(0,A.QS)({trackMouse:!0,trackTouch:!0,delta:50,onTap:function(){e.isGroup||e.deviceType===x.Y.Dimmer||M()},onSwipeStart:function(){return N(!0)},onSwiping:function(e){"Up"!==e.dir&&"Down"!==e.dir&&(e.event instanceof MouseEvent?e.event&&e.event.clientX&&p(Math.round(Math.min(Math.max(e.event.clientX/(.9*window.innerWidth)*100,0),100))):e.event&&e.event.targetTouches[0]&&e.event.targetTouches[0].clientX&&p(Math.round(Math.min(Math.max(e.event.targetTouches[0].clientX/(.9*window.innerWidth)*100,0),100))),e.first&&(D.onOpen(),j(e.initial)))},onSwiped:function(e){N(!1),D.onClose(),"Up"!==e.dir&&"Down"!==e.dir&&R("setBrightness",{brightness:d})}}),R=s.useCallback(function(n,r){e.isGroup?[x.Y.Hsv,x.Y.Dimmer,x.Y.Hcl,x.Y.Multy].forEach(function(i){t((0,h.xl)({deviceId:e.tbDeviceId,obj:(0,S.merge)(r,{deviceId:e.deviceId,deviceType:i}),func:n,broadcast:"manual"}))}):t((0,h.xl)({deviceId:e.tbDeviceId,obj:r,func:n,broadcast:"none"}))},[t,e.deviceId,e.isGroup,e.tbDeviceId]);return(0,b.jsxs)(b.Fragment,{children:[P&&(0,b.jsx)(components_ColorPicker,{isOpen:!0,onOpenChange:T,hclPicker:Z,deviceType:e.deviceType,brightness:d,setBrightness:function(e){return R("setBrightness",{brightness:e})},onHclChange:function(e){R("setColor",{whiteBalance:cctAngleToWhiteBalance(e).h,brightness:d||50})},onHsvChange:function(e){R("setColor",{hue:e.h,saturation:e.s,brightness:d||50})},usedColor:i,name:e.deviceName}),(0,b.jsxs)("div",{className:"grid grid-flow-col-dense grid-cols-deviceItem gap-[3px]",children:[(0,b.jsxs)("div",colorful_objectSpread(colorful_objectSpread({},E),{},{ref:function(e){E.ref(e),w.current=e},className:"h-[65px] input-slider relative",children:[(0,b.jsx)("p",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 left-[3%] text-[18px] text-shadow",children:e.deviceName}),(0,b.jsx)("div",{className:"h-[65px] z-10 w-full bg-white/20 rounded-l-[10px] overflow-hidden",children:(0,b.jsx)("div",{ref:y,className:"rangeslider-fill h-full transition-[width] duration-100 ease-linear"})})]})),(0,b.jsx)("div",{onClick:function(){return R("setPowerMesh",(0,S.merge)({isOn:!e.isOn}))},className:"flex w-[65px] h-[65px] shrink-0 justify-center items-center cursor-pointer rounded-r-[10px] bg-white/20 text-white",children:(0,b.jsx)(g.Z,{icon:"ic_onoff",size:35})})]}),(0,b.jsx)(OverlaySlider,{isOpen:D.isOpen,onOpenChange:D.onOpenChange,color:i,title:e.deviceName,value:d,coords:m})]})};function shutter_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function shutter_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?shutter_ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):shutter_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ShutterItem=function(e){var t=(0,l.I0)(),n=s.useState(0),r=(0,c.Z)(n,2),i=r[0],o=r[1],a=s.useState([0,0]),u=(0,c.Z)(a,2),d=u[0],p=u[1],f=s.useRef(null),v=s.useState(!1),m=(0,c.Z)(v,2),j=m[0],w=m[1],y=(0,F.q)();s.useEffect(function(){j||o(e.percentage)},[e.percentage,j]),s.useEffect(function(){f.current&&(f.current.style.width=i+"%")},[i]);var O=(0,A.QS)({trackMouse:!0,trackTouch:!0,delta:50,onSwipeStart:function(){return w(!0)},onSwiping:function(e){"Up"!==e.dir&&"Down"!==e.dir&&(e.event instanceof MouseEvent?e.event&&e.event.clientX&&o(Math.round(Math.min(Math.max(e.event.clientX/(.9*window.innerWidth)*100,0),100))):e.event&&e.event.targetTouches[0]&&e.event.targetTouches[0].clientX&&o(Math.round(Math.min(Math.max(e.event.targetTouches[0].clientX/(.9*window.innerWidth)*100,0),100))),e.first&&(y.onOpen(),p(e.initial)))},onSwiped:function(e){w(!1),y.onClose(),"Up"!==e.dir&&"Down"!==e.dir&&_("moveShutter",{direction:3,openPercentage:i,changed:0,duration:0})}}),_=s.useCallback(function(n,r){t((0,h.xl)({deviceId:e.tbDeviceId,obj:(0,S.merge)(r,e.isGroup?{deviceId:e.deviceId,deviceType:x.Y.Shutter}:{}),func:n,broadcast:e.isGroup?"manual":"none"}))},[t,e.deviceId,e.isGroup,e.tbDeviceId]),C=s.useCallback(function(t){var n;"up"===t?(n=0,e.channel2&&(n=1)):"down"===t&&(n=2,e.channel1&&(n=1)),_("moveShutter",{direction:n,changed:0,duration:0,usePosition:!0})},[e.channel1,e.channel2,_]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",shutter_objectSpread(shutter_objectSpread({className:"grid grid-flow-col-dense grid-cols-deviceItem gap-[3px]"},O),{},{children:[(0,b.jsxs)("div",{className:"h-[65px] relative",children:[(0,b.jsx)("p",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 left-[3%] text-[18px] text-shadow",children:e.deviceName}),(0,b.jsx)("div",{className:"h-[65px] z-10 w-full bg-white/20 rounded-l-[10px] overflow-hidden",children:(0,b.jsx)("div",{ref:f,className:"h-full transition-[width] bg-white duration-100 ease-linear"})})]}),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{onClick:function(){return C("up")},className:"flex w-[65px] h-[65px] shrink-0 justify-center items-center cursor-pointer ".concat(e.channel2?"bg-white text-black":"bg-white/20 text-white"),children:(0,b.jsx)(g.Z,{icon:"ic_arrow_up",size:35})}),(0,b.jsx)("div",{onClick:function(){return C("down")},className:"flex w-[65px] h-[65px] shrink-0 justify-center items-center cursor-pointer rounded-r-[10px] ".concat(e.channel1?"bg-white text-black":"bg-white/20 text-white"),children:(0,b.jsx)(g.Z,{icon:"ic_arrow-down",size:35})})]})]})),(0,b.jsx)(OverlaySlider,{color:"#fff",coords:d,isOpen:y.isOpen,onOpenChange:y.onOpenChange,title:e.deviceName,value:i})]})},SwitchItem=function(e){var t=(0,l.I0)(),n=s.useCallback(function(n,r){t((0,h.xl)({deviceId:e.tbDeviceId,obj:(0,S.merge)(r,e.isGroup?{deviceId:e.deviceId,deviceType:x.Y.Switch}:{}),func:n,broadcast:e.isGroup?"manual":"none"}))},[t,e.deviceId,e.isGroup,e.tbDeviceId]);return(0,b.jsxs)("div",{className:"grid grid-flow-col-dense grid-cols-deviceItem gap-[3px]",style:{marginBottom:e.isGroup?"10px":0},children:[(0,b.jsxs)("div",{className:"h-[65px] input-slider relative",children:[(0,b.jsx)("p",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 left-[3%] text-[18px] text-shadow",children:e.deviceName}),(0,b.jsx)("div",{className:"h-[65px] z-10 w-full bg-white/20 rounded-l-[10px] overflow-hidden",children:(0,b.jsx)("div",{className:"h-full transition-[width] bg-white duration-100 ease-linear ".concat(e.isOn?"w-full":"w-0")})})]}),(0,b.jsx)("div",{onClick:function(){e.isGroup?n("setPowerMesh",{isOn:!e.isOn}):void 0!==e.channelIndex&&n("setPower",{channelIndex:e.channelIndex,channelStatus:!e.isOn})},className:"flex w-[65px] h-[65px] shrink-0 justify-center items-center cursor-pointer rounded-r-[10px] bg-white/20 text-white",children:(0,b.jsx)(g.Z,{icon:"ic_onoff",size:35})})]})},U=n(4968),X=n(2620),L=n(3173);function heater_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function heater_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?heater_ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):heater_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var HeaterItem=function(e){var t=s.useState(0),n=(0,c.Z)(t,2),r=n[0],i=n[1];(0,s.useEffect)(function(){i((0,N.et)(e.targetTemperature,e.minTemperature,e.maxTemperature,0,100))},[e.maxTemperature,e.minTemperature,e.targetTemperature]);var o=s.useRef(null),a=s.useRef(null);s.useEffect(function(){o.current&&(o.current.style.width=r+"%")},[r]);var l=s.useMemo(function(){return Math.round(2*parseFloat((0,N.et)(r,0,100,e.minTemperature,e.maxTemperature).toFixed(1)))/2},[e.maxTemperature,e.minTemperature,r]),u=(0,A.QS)({trackMouse:!0,trackTouch:!0,delta:50,preventScrollOnSwipe:!0,onSwiping:function(e){"Up"!==e.dir&&"Down"!==e.dir&&(e.event instanceof MouseEvent?e.event&&e.event.clientX&&i(Math.round(Math.min(Math.max(e.event.clientX/(.9*window.innerWidth)*100,0),100))):e.event&&e.event.targetTouches[0]&&e.event.targetTouches[0].clientX&&i(Math.round(Math.min(Math.max(e.event.targetTouches[0].clientX/(.9*window.innerWidth)*100,0),100))))},onSwiped:function(t){"Up"!==t.dir&&"Down"!==t.dir&&e.onTempChange(l)}});return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"grid grid-flow-col-dense grid-cols-deviceItem gap-[3px]",children:(0,b.jsxs)("div",heater_objectSpread(heater_objectSpread({},u),{},{ref:function(e){u.ref(e),a.current=e},className:"h-[65px] input-slider relative",children:[(0,b.jsx)("p",{className:"select-none pointer-events-none absolute top-1/2 -translate-y-1/2 left-[3%] text-[18px] text-shadow",children:e.deviceName}),(0,b.jsx)("div",{className:"h-[65px] z-10 w-full bg-white/20 rounded-[10px] overflow-hidden",children:(0,b.jsx)("div",{ref:o,className:"bg-white h-full transition-[width] duration-100 ease-linear"})}),(0,b.jsxs)("p",{className:"z-10 pointer-events-none absolute top-1/2 -translate-y-1/2 right-[3%] text-[18px] text-shadow",children:[e.currentTemperature.toFixed(1),"\xb0C / ",l.toFixed(1),"\xb0C"]})]}))})})},Q=n(2187),V=n(8255),q=s.memo(function(e){var t=e.tbDeviceId,n=e.deviceType,r=e.deviceId,i=e.name,c=e.extras,o=s.useMemo(function(){return(0,S.merge)({},{active:!1,brightness:0,hue:0,saturation:0,whiteBalance:0,isOn:!1},c)},[c]);return(0,b.jsx)(ColorfulItem,{active:o.active,brightness:(0,N.et)(o.brightness,0,1,0,100),deviceId:r,deviceName:i,multyMode:o.multyMode,deviceType:n,isGroup:(0,$.ty)(r),isOn:o.isOn,tbDeviceId:t,hue:o.hue,saturation:o.saturation,whiteBalance:o.whiteBalance},"colorful-device-"+t)}),J=s.memo(function(e){var t=e.name,n=e.extras,r=e.tbDeviceId,i=e.deviceId,c=e.deviceType,o=(0,l.I0)(),a=s.useMemo(function(){return(0,S.merge)({},{active:!1,targetTemperature:0,currentTemperature:0},n)},[n]);return(0,b.jsx)(HeaterItem,{active:a.active,minTemperature:5,maxTemperature:35,targetTemperature:a.targetTemperature,currentTemperature:a.currentTemperature,deviceName:t,onTempChange:function(e){return o((0,h.xl)({deviceId:r,broadcast:"none",func:"setTRVTargetTemp",obj:{deviceId:i,deviceType:c,targetTemperature:e}}))},isGroup:!1,uid:r},"heater-device-"+r)}),ee=s.memo(function(e){var t=e.uid,n=e.name,r=e.extras,i=(0,l.I0)(),c=s.useMemo(function(){return(0,S.merge)({},{switch:!0,mode:"manual",temp_set:300,upper_temp:350,temp_current:206,lower_temp:40,child_lock:!1,battery_percentage:101,factory_reset:!1,fault:0,active:!0},r)},[r]);return(0,b.jsx)(HeaterItem,{active:c.active,minTemperature:.1*c.lower_temp,maxTemperature:.1*c.upper_temp,targetTemperature:.1*c.temp_set,currentTemperature:.1*c.temp_current,deviceName:n,onTempChange:function(e){var n;return null===(n=Q.q.instance)||void 0===n?void 0:n.control.postDevicesDeviceIdCommands(t,{commands:[{code:"temp_set",value:10*e}]}).then(function(){return i((0,h.xg)({data:{temp_set:[[Date.now(),(10*e).toString()]]},tbDeviceId:t}))}).catch(function(){})},isGroup:!1,uid:t},"colorful-device-"+t)}),et=s.memo(function(e){var t=e.tbDeviceId,n=e.deviceType,r=e.extras,i=e.deviceId,c=e.name,o=s.useMemo(function(){return(0,S.merge)({},{active:!1,channel0:!1,channel1:!1,percentage:0},r)},[r]);return(0,b.jsx)(ShutterItem,{active:o.active,isGroup:(0,$.ty)(i),channel1:o.channel0,channel2:o.channel1,deviceId:i,deviceName:c,deviceType:n,percentage:(0,N.et)(o.percentage,0,1,0,100),tbDeviceId:t},"shutter-device-"+t)}),en=s.memo(function(e){var t=e.tbDeviceId,n=e.deviceType,r=e.deviceId,i=e.name,c=e.extras,o=e.additionalInfo,a=s.useMemo(function(){return(0,S.merge)({},{active:!1,isOn:!1,channel0:!1},c)},[c]),l=s.useMemo(function(){return!(0,$.ty)(r)&&X.Z.boolean(a.channel1)},[r,a.channel1]),u=s.useMemo(function(){var e;return l?"".concat(i," - ").concat(null!==(e=o[V.O8.Channel1Name])&&void 0!==e?e:"channel 1"):i},[o,l,i]),d=s.useMemo(function(){var e;return l?"".concat(i," - ").concat(null!==(e=o[V.O8.Channel2Name])&&void 0!==e?e:"channel 2"):i},[o,l,i]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(SwitchItem,{active:a.active,deviceId:r,deviceName:u,deviceType:n,isGroup:(0,$.ty)(r),isOn:a.channel0,tbDeviceId:t,channelIndex:0},"switch-device-"+t+"-channel-0"),l&&(0,b.jsx)(SwitchItem,{active:a.active,deviceId:r,deviceName:d,deviceType:n,isGroup:(0,$.ty)(r),isOn:a.channel1,tbDeviceId:t,channelIndex:1},"switch-device-"+t+"-channel-1")]})});function GroupItem(e){var t=e.category,n=e.devices,r=e.groupId,i=s.useMemo(function(){switch(t){case x.$.light:return x.Y.Dimmer;case x.$.shutter:return x.Y.Shutter;case x.$.switch:return x.Y.Switch;default:return x.Y.Any}},[t]),c=(0,p.Z)().formatMessage,o=s.useMemo(function(){switch(t){case x.$.light:return c({id:"app.text.allLights"});case x.$.shutter:return c({id:"app.text.allShutter"});case x.$.switch:return c({id:"app.text.allSwitches"});default:return""}},[t,c]),a=s.useMemo(function(){return n.filter(function(e){var t=e.telemetry.active;return!X.Z.undefined(t)&&"true"===t[0].value})[0]},[n]),l=s.useMemo(function(){var e=(0,U.Q3)(i);return X.Z.undefined(a)?{}:(0,S.reduce)(e,function(e,t){if(!(t in a.telemetry))return e;var r=(0,U.BN)(t,a.telemetry[t][0].value);switch(typeof r){case"boolean":r=n.some(function(e){return t in e.telemetry&&(0,U.BN)(t,e.telemetry[t][0].value)});break;case"number":r=Math.max.apply(Math,(0,j.Z)(n.filter(function(e){var t;return(0,U.BN)("isOn",null!==(t=e.telemetry.isOn[0].value)&&void 0!==t?t:"false")}).map(function(e){return t in e.telemetry?(0,U.BN)(t,e.telemetry[t][0].value):0})))}return e[t]=r,e},{})},[i,n,a]);return X.Z.undefined(a)?(0,b.jsx)("div",{className:"hidden"}):i===x.Y.Dimmer&&(0,b.jsx)(q,{deviceId:128+r,deviceType:i,name:o,tbDeviceId:a.id.id,extras:l})||i===x.Y.Shutter&&(0,b.jsx)(et,{deviceId:128+r,name:o,deviceType:i,tbDeviceId:a.id.id,extras:l})||i===x.Y.Switch&&(0,b.jsx)(en,{deviceId:128+r,name:o,deviceType:i,tbDeviceId:a.id.id,extras:l})||(0,b.jsx)("div",{className:"hidden"})}function DeviceItem(e){var t=e.device,n=s.useMemo(function(){return(0,U.yI)({name:t.name,type:t.type})},[t.name,t.type]),r=s.useMemo(function(){return(0,U.dQ)(t.name)},[t.name]),i=s.useMemo(function(){return(0,U.Q3)(null!=n?n:x.Y.Any)},[n]),c=s.useMemo(function(){return(0,S.reduce)(i,function(e,n){if(n in t.telemetry){var r=t.telemetry[n][0];e[n]=(0,U.BN)(n,r.value)}return e},{})},[i,t.telemetry]);return(0,$.PC)(n)&&(0,b.jsx)(q,{deviceId:r,deviceType:n,name:t.label,tbDeviceId:t.id.id,extras:c})||n===x.Y.Shutter&&(0,b.jsx)(et,{deviceId:r,name:t.label,deviceType:n,tbDeviceId:t.id.id,extras:c})||n===x.Y.Switch&&(0,b.jsx)(en,{deviceId:r,name:t.label,additionalInfo:t.additionalInfo,deviceType:n,tbDeviceId:t.id.id,extras:c})||n===x.Y.Trv&&(0,b.jsx)(J,{deviceId:r,deviceType:n,name:t.label,extras:c,tbDeviceId:t.id.id})||n===L.U.Icon2RT&&(0,b.jsx)(ee,{name:t.name,extras:c,uid:t.id.id})||(0,b.jsx)("div",{className:"hidden"})}var useAvailableCategories=function(e){var t=s.useMemo(function(){return(0,S.uniq)(e.map(function(e){return(0,U.yI)({type:e.type,name:e.name})}).filter((0,S.negate)(X.Z.undefined)))},[e]);return s.useMemo(function(){return(0,S.uniq)(t.map(function(e){return(0,U.VA)(e)})).sort(function(e,t){return e-t})},[t])},components_Devices=function(e){var t=e.tbDeviceIds,n=e.groupId,r=(0,l.v9)(function(e){return(0,h.F9)(e,t)}),i=(0,p.Z)().formatMessage,c=(0,s.useState)(x.$.none),o=c[0],a=c[1],u=useAvailableCategories(r),d=s.useMemo(function(){return r.filter(function(e){var t=(0,U.yI)({type:e.type,name:e.name});return!X.Z.undefined(t)&&(0,U.VA)(t)===o})},[r,o]);return s.useEffect(function(){u.length?u.includes(o)||a(u[0]):a(x.$.none)},[o,u]),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mt-4 mb-3 mx-1",children:(0,b.jsx)(CategoryList,{availableCategories:u,category:o,setCategory:a})}),(0,b.jsx)("div",{className:"my-3 mb-5",children:(0,b.jsx)(GroupItem,{category:o,devices:d,groupId:n},"all-devices-".concat(o))}),(0,b.jsxs)("div",{className:"gap-[3px] grid",children:[o===x.$.heating&&(0,b.jsxs)("div",{className:"w-full p-[3px] flex text-[18px] text-white/30",children:[(0,b.jsx)("span",{className:"pointer-events-none",children:i({id:"app.text.temperature"})}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsxs)("span",{className:"pointer-events-none",children:[i({id:"app.text.currentTemperature"})," / ",i({id:"app.text.targetTemperature"})]})]}),d.map(function(e){return(0,b.jsx)(DeviceItem,{device:e},e.id.id)})]})]})},er=n(8010),ei=n(8427),ec=n(4656),eo=n(7676),ea=n(7929),es=n(5202),home=function(){var e=(0,p.Z)().formatMessage,t=(0,l.I0)(),n=(0,l.v9)(er.oH),o=n.authenticated,f=n.token,v=s.useState("devices"),m=(0,c.Z)(v,2),x=m[0],g=m[1],j=(0,l.v9)(h.qK),w=(0,l.v9)(h.jA),y=(0,ea.Z)((0,i.Z)(a().mark(function _callee(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t((0,h.LO)());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},_callee)})),[o,t]),O=(0,c.Z)(y,2),_=O[0],C=O[1],S=(0,ea.Z)((0,i.Z)(a().mark(function _callee2(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=4;break}return e.next=3,t((0,h.bt)()).unwrap().then(function(e){return e.reduce(function(e,n){return e.then(function(){return t((0,h.Fj)({tbGroupId:n.tbGroupId})).unwrap().catch(function(){})})},Promise.resolve())});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},_callee2)})),[o]),I=(0,c.Z)(S,2),N=I[0],k=I[1],P=s.useMemo(function(){return j.map(function(e){return e.id.id})},[j]),M=s.useMemo(function(){return[{groupId:0,tbGroupId:"all-devices-group-uid",devices:P,name:e({id:"app.text.allDevices"})}].concat(w)},[P,e,w]);(0,s.useEffect)(function(){C().then(function(){return k()})},[C,k]);var T=s.useRef(new Map),D=(0,eo.ZP)("wss://".concat("https://dash1.meshle.com".replace(/^https?:\/\//,""),"/api/ws/plugins/telemetry?token=")+f),Z=D.readyState,B=D.sendJsonMessage,G=D.lastJsonMessage,K=s.useMemo(function(){var e;return(e={},(0,r.Z)(e,eo.kQ.CONNECTING,"Connecting"),(0,r.Z)(e,eo.kQ.OPEN,"Open"),(0,r.Z)(e,eo.kQ.CLOSING,"Closing"),(0,r.Z)(e,eo.kQ.CLOSED,"Closed"),(0,r.Z)(e,eo.kQ.UNINSTANTIATED,"UnInstantiated"),e)[Z]},[Z]),W=s.useMemo(function(){return j.map(function(e){return{tbDeviceId:e.id.id,deviceType:(0,U.Cy)(e.name)}}).filter(function(e){return!X.Z.undefined(e.deviceType)})},[j]),H=s.useCallback(function(e){var n=e.subscriptionId,r=T.current.get(n);void 0!==r&&t((0,h.xg)({tbDeviceId:r,data:e.data}))},[t]);s.useEffect(function(){X.Z.nullOrUndefined(G)||H(G)},[H,G]);var z=s.useCallback(function(){if("Open"===K){var e={tsSubCmds:[],historyCmds:[],attrSubCmds:[]};W.forEach(function(t){var n=(0,U.Q3)(t.deviceType);if(n.length){var r=T.current.size+1;T.current.set(r,t.tbDeviceId),e.tsSubCmds.push({entityType:"DEVICE",entityId:t.tbDeviceId,scope:"LATEST_TELEMETRY",cmdId:r,keys:n.reduce(function(e,t){return e+","+t},"").slice(1)})}}),B(e)}},[JSON.stringify(W),K,B]);s.useEffect(function(){z()},[z]);var A=s.useCallback(function(e){X.Z.string(e)&&g(e)},[]);return(0,b.jsx)(ei.i1,{children:(0,b.jsxs)("div",{className:"flex flex-col w-full min-h-screen text-white bg-gradient-radial overflow-y-scroll",children:[(0,b.jsx)(u.Z,{}),(0,b.jsxs)("div",{className:"w-full flex-1",children:[_.loading&&(0,b.jsx)(es.a,{message:e({id:"app.text.fetchingDevices"})}),(0,b.jsx)("div",{className:"w-full mx-auto px-0.5 justify-self-center max-w-[600px] overflow-hidden",children:(0,b.jsxs)(E.n,{"aria-label":"Options",variant:"light",selectedKey:x,onSelectionChange:A,size:"md",disabledKeys:["loading-tab"],classNames:{tabList:"shadow-none",cursor:"bg-transparent shadow-none",tabContent:"text-lg overflow-hidden text-white/20 max-w-[120px] text-ellipsis group-data-[selected=true]:text-white ",tab:"data-[focus-visible=true]:outline-none!",base:"w-full",panel:"py-0"},children:[M.map(function(e){return(0,b.jsx)(R.r,{title:e.name,children:(0,b.jsx)(components_Devices,{tbDeviceIds:e.devices,groupId:e.groupId})},e.tbGroupId)}),N.loading&&(0,b.jsx)(R.r,{children:(0,b.jsx)(ec.Z,{size:"sm","aria-label":"Loading...",className:"scale-75"})},"loading-tab")]})})]}),(0,b.jsx)(d.Z,{})]})})}},4309:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(8773)}])},329:function(e){e.exports={colorPickerWrap:"ColorPicker_colorPickerWrap__YuPrc",colorPickerContainer:"ColorPicker_colorPickerContainer__Ue5pw",colorPicker:"ColorPicker_colorPicker__mG6VL",overlay:"ColorPicker_overlay__iyOqZ",colorBox:"ColorPicker_colorBox__iqn5T",ctaBtn:"ColorPicker_ctaBtn__RDJ49",imprintMain:"ColorPicker_imprintMain___afsG",imprint:"ColorPicker_imprint__6gpyJ"}}},function(e){e.O(0,[571,160,635,880,125,852,671,774,888,179],function(){return e(e.s=4309)}),_N_E=e.O()}]);