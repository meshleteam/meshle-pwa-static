(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{5047:function(e,t,n){"use strict";n.d(t,{S:function(){return c}});var i=n(7294),r=n(7131),c=function(){return i.useContext(r.c)}},2429:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eO}});var i=n(7294),r=n(9473),c=n(7160),o=n.n(c),a=n(5675),s=n.n(a),l=n(3695),d=n.n(l),u=n(9709),f=n(5047),h=n(5893),v=function(){var e=(0,i.useRef)(null),t=(0,r.I0)(),n=(0,f.S)();return(0,h.jsxs)("div",{className:d().header,children:[(0,h.jsx)(s(),{src:"/pwa/ic_burger.svg",width:35,height:35,alt:"b",onClick:function(){e.current&&e.current.classList.toggle(d().active)}}),(0,h.jsx)("div",{ref:e,className:d().dropdown,children:(0,h.jsx)("div",{className:d().item,onClick:function(){t((0,u.kS)())},children:"Logout"})}),null!=n&&n.logo?(0,h.jsx)(s(),{src:"/".concat(null==n?void 0:n.logo),width:n.logoWidth,className:d().logo,height:n.logoHeight,alt:"logo"}):(0,h.jsx)("div",{className:"".concat(d().logo,"  icon-ic_meshle-full")})]})},p=n(6896),m=n(1752),g=n.n(m),x=n(2210),b=n.n(x),y=function(e){var t=e.setModal,n=(0,p.Z)().formatMessage,i=function(){t(!1),document.body.style.overflow="auto";var e=document.getElementsByTagName("html")[0];e.style.overflow="auto",e.style.position="unset",e.style.height="unset"};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{onClick:function(){return i()},className:b().overlay}),(0,h.jsx)("div",{className:"".concat(b().colorPickerWrap),children:(0,h.jsx)("div",{className:b().colorPickerContainer,children:(0,h.jsxs)("div",{className:"".concat(b().colorPicker," ").concat(b().imprint),children:[(0,h.jsx)("h2",{children:n({id:"app.footer.imprint"})}),(0,h.jsxs)("div",{className:"".concat(b().imprintMain),children:[(0,h.jsx)("div",{children:n({id:"app.footer.line1"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line2"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line3"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line4"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line5"})}),(0,h.jsxs)("div",{className:"mt-50",children:[(0,h.jsx)("div",{children:n({id:"app.footer.line6"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line7"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line8"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line9"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line10"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line11"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line12"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line13"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line14"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line15"})}),(0,h.jsx)("div",{children:n({id:"app.footer.line16"})})]})]}),(0,h.jsx)("button",{onClick:function(){i()},className:b().ctaBtn,children:n({id:"app.text.close"})})]})})})]})},j=n(7246),w=n.n(j),_=function(){var e=g()().publicRuntimeConfig,t=(0,i.useState)(!1),n=t[0],r=t[1],c=(0,p.Z)().formatMessage;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:w().footer,children:[(0,h.jsx)("button",{className:w().imprint,onClick:function(){r(!0),document.body.style.overflow="hidden";var e=document.getElementsByTagName("html")[0];e.style.overflow="hidden",e.style.position="relative",e.style.height="100%"},children:c({id:"app.footer.imprint"})}),(0,h.jsx)("div",{className:w().powered,children:c({id:"app.footer.caption"})}),(0,h.jsxs)("div",{className:w().version,children:["v. ",null==e?void 0:e.version]})]}),n&&(0,h.jsx)(y,{setModal:r})]})},O=n(7812),N=n(6835),k=n(9499),I=n(6010),P=n(7676),C=n(803),S=n(336),M=n(6083),D=n(8168),E=n(8241),T=n(6486),B=n(9457),Z=n(9848),H=n.n(Z),Y=function(e){var t=e.category,n=e.setCategory,r=e.devices,c=i.useMemo(function(){return r.reduce(function(e,t){return t.data.length&&e.push(t.category),e},[])},[r]),o=(0,p.Z)().formatMessage;return(0,h.jsxs)("div",{className:H().deviceRow,children:[c.includes("light")&&(0,h.jsxs)("div",{onClick:function(){n("light")},className:"".concat(H().deviceBox," ").concat("light"===t&&H().activeBox3),children:[(0,h.jsx)("div",{className:"".concat(H().deviceIcon," icon-ic_bulb_off")}),(0,h.jsx)("p",{children:o({id:"app.device.lights.title"})})]}),c.includes("switch")&&(0,h.jsxs)("div",{onClick:function(){n("switch")},className:"".concat(H().deviceBox," ").concat("switch"===t&&H().activeBox3),children:[(0,h.jsx)("div",{className:"".concat(H().deviceIcon,"   icon-ic_switch_double")}),(0,h.jsx)("p",{children:o({id:"app.device.switches.title"})})]}),c.includes("shutter")&&(0,h.jsxs)("div",{onClick:function(){n("shutter")},className:"".concat(H().deviceBox," ").concat("shutter"===t&&H().activeBox3),children:[(0,h.jsx)("div",{className:"".concat(H().deviceIcon,"  icon-ic_shutter")}),(0,h.jsx)("p",{children:o({id:"app.device.shutter.title"})})]})]})},G=n(4700),R=n.n(G),W=n(7490),F=n(47),X=n(255);n(3884);var Q=n(4730),L=n(101),U=n(5903);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,k.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(e){var t=e.className,n=e.color,i=e.left,r=e.top,c=e.style,o=e.prefixCls,a=A(A({},c),{},{position:"absolute",top:r,left:i}),s="".concat(o,"-pointer ").concat(t||"");return(0,h.jsx)("div",{className:s,style:a,children:(0,h.jsx)("div",{className:"".concat(o,"-fill"),style:{width:10,height:10,transform:"translate(-5px, -5px)",boxShadow:"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",borderRadius:"50%",backgroundColor:"#fff"},children:(0,h.jsx)("div",{style:{inset:0,borderRadius:"50%",position:"absolute",backgroundColor:n}})})})},J=2*Math.PI;function z(e){var t=e.width,n=void 0===t?0:t,i=n/2;return{width:n,radius:i,cx:i,cy:i}}function K(e){var t=e.width;return(void 0===t?0:t)/2}function $(e,t,n){var i=e.angle||0,r=e.direction;return n&&"clockwise"===r?t=i+t:"clockwise"===r?t=360-i+t:n&&"anticlockwise"===r?t=i+180-t:"anticlockwise"===r&&(t=i-t),(t%360+360)%360}var ee=function(e){var t=(0,T.merge)({},e);return e.h<=180?t.h=(0,T.clamp)(127.5*((100-e.s)/100),0,127.5):t.h=(0,T.clamp)(255*(e.s/100),127.5,255),t},et=function(e){var t,n;return(e=34+e/100*66)<=66?(t=255,n=Math.min(Math.max(99.4708025861*Math.log(e)-161.1195681661,0),255)):(t=Math.min(Math.max(329.698727446*Math.pow(e-60,-.1332047592),0),255),n=Math.min(Math.max(288.1221695283*Math.pow(e-60,-.0755148492),0),255)),[Math.round(t),Math.round(n),Math.round(e>=66?255:e<=19?0:Math.min(Math.max(138.5177312231*Math.log(e-10)-305.0447927307,0),255))]},en=n(9016),ei=["prefixCls","radius","pointer","className","style","width","height","direction","angle","color","onChange"];function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(t){(0,k.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eo=i.forwardRef(function(e,t){var n,r,c,o,a,s,l,d,u=e.prefixCls,f=void 0===u?"w-color-wheel":u,v=(e.radius,e.pointer),p=e.className,m=e.style,g=e.width,x=void 0===g?200:g,b=e.height,y=void 0===b?200:b,j=e.direction,w=e.angle,_=e.color,O=e.onChange,N=(0,Q.Z)(e,ei),k="string"==typeof _&&(0,L.Ff)(_)?(0,F.HW)(_):_||{},I=ee(k),P=et(100*(0,en.e)(I.h,0,255,0,1)),C=_?(0,F.s)({r:P[0],g:P[1],b:P[2],a:k.a}):"",S=(c=(r=z(n={width:x})).cx,o=r.cy,a=K(n),s=(180+$(n,k.h,!0))*(J/360),{x:c+(l=k.s/100*a)*Math.cos(s)*(d="clockwise"===n.direction?-1:1),y:o+l*Math.sin(s)*d}),M=function(e,t){var n,i,r,c,o,a,s,l,d,u,f,h=(n={width:x},i=x-e.x,r=y-e.y,o=(c=z(n)).cx,a=c.cy,s=K(n),i=o-i,l=$(n,Math.atan2(-(r=a-r),-i)*(360/J)),f=Math.min(Math.sqrt((d=i)*d+(u=r)*u),s),{h:Math.round(l),s:Math.round(100/s*f)}),v={h:h.h,s:h.s,v:k.v,a:k.a};O&&O((0,F.$_)(v))};return(0,h.jsxs)(U.ZP,ec(ec({className:[f,p||""].filter(Boolean).join(" ")},N),{},{style:ec({position:"relative",width:x,height:y},m),ref:t,onMove:M,onDown:M,children:[i.createElement(v||V,ec({prefixCls:f,style:{zIndex:1,transform:"translate(".concat(S.x,"px, ").concat(S.y,"px)")}},{top:"0",left:"0",color:C})),(0,h.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"anticlockwise"===(void 0===j?"anticlockwise":j)?"linear-gradient(hsl(213, 100%, 73%), hsl(25, 100%, 73%))":"linear-gradient(to bottom, #409cff 0%, #fffffb 50%, #ff6c00 100%)",transform:"rotateZ(".concat((void 0===w?90:w)+90,"deg)"),inset:0}}),(0,h.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"radial-gradient(circle closest-side, #fff, transparent)",inset:0}}),(0,h.jsx)("div",{style:{backgroundColor:"#000",borderRadius:"50%",position:"absolute",inset:0,opacity:"number"==typeof k.v?1-k.v/100:0}})]}))});eo.displayName="Hcl-Wheel";var ea=n(9755),es=n.n(ea);function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach(function(t){(0,k.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eu=function(e){var t=e.hclPicker,n=e.closeModal,r=e.name,c=e.setColor,o=e.usedColor,a=e.setBrightness,s=e.brightness,l=(0,i.useState)({h:0,s:0,v:68,a:1}),d=l[0],u=l[1],f=(0,i.useState)({h:0,s:0,v:68,a:1}),v=f[0],m=f[1],g=(0,i.useState)((0,F.HW)(o)),x=g[0],y=g[1],j=(0,i.useState)((0,F.HW)(o).v),w=j[0],_=j[1],O=(0,i.useRef)(),N=(0,i.useRef)(null),k=(0,p.Z)().formatMessage,I=function(){t?c(v,!0):c(x,!1)};return(0,i.useEffect)(function(){if(!(null==x||"string"==typeof x&&0===x.trim().length||"object"==typeof x&&0===Object.keys(x).length)&&N.current){var e=(0,F.A)(x),t=N.current.querySelector(".rangeslider__fill"),n=N.current.querySelector(".rangeslider__handle");t.style.backgroundColor=e,n.style.backgroundColor=e}},[x]),(0,i.useEffect)(function(){_(s)},[s]),(0,i.useEffect)(function(){"object"==typeof x&&Object.keys(x).length>0&&(u(x),m(x))},[x]),(0,i.useEffect)(function(){return document.body.style.overflow="hidden",document.getElementsByTagName("html")[0].style.overflow="hidden",function(){document.body.style.overflow="auto",document.getElementsByTagName("html")[0].style.overflow="auto"}},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{onClick:function(){return n(!1)},className:b().overlay}),(0,h.jsx)("div",{className:b().colorPickerWrap,children:(0,h.jsx)("div",{className:b().colorPickerContainer,children:(0,h.jsxs)("div",{className:b().colorPicker,onMouseDown:function(e){es()(e.target).parents(".color-picker-main").length&&(O.current=!0)},onTouchStart:function(e){es()(e.target).parents(".color-picker-main").length&&(O.current=!0)},onMouseUp:function(){O.current&&setTimeout(function(){I()},100),O.current=!1},onTouchEnd:function(){O.current&&setTimeout(function(){I()},100),O.current=!1},children:[(0,h.jsx)("h2",{children:r}),(0,h.jsx)("div",{className:"color-picker-main",children:t?(0,h.jsx)(eo,{color:v,onChange:function(e){m(ed({},e.hsva))},width:300,height:300}):(0,h.jsx)(W.Z,{color:d,onChange:function(e){u(ed({},e.hsva)),y(e.hsva)},width:300,height:300})}),(0,h.jsx)("div",{ref:N,className:"".concat(b().colorBox," opacity-slider"),children:(0,h.jsx)(X.Z,{value:w,min:1,tooltip:!1,max:100,orientation:"horizontal",onChange:function(e){return _(e)},onChangeComplete:function(e){return a(w)}})}),(0,h.jsx)("button",{onClick:function(){return n(!1)},className:"".concat(b().ctaBtn," close-btn"),children:k({id:"app.text.close"})})]})})})]})},ef=function(e,t,n){var i,r,c,o=Math.floor(6*e),a=6*e-o,s=n*(1-t),l=n*(1-a*t),d=n*(1-(1-a)*t);switch(o%6){case 0:i=n,r=d,c=s;break;case 1:i=l,r=n,c=s;break;case 2:i=s,r=n,c=d;break;case 3:i=s,r=l,c=n;break;case 4:i=d,r=s,c=n;break;default:i=n,r=s,c=l}return[Math.round(255*i),Math.round(255*r),Math.round(255*c)]},eh=n(5338),ev=function(e){var t=i.useRef(null),n=i.useRef(null);return i.useEffect(function(){t.current&&(t.current.style.paddingTop=e.coords?"".concat(e.coords[1]-30,"px"):"50%")},[e.coords]),i.useEffect(function(){n.current&&(n.current.style.width="".concat(e.value,"%"),n.current.style.background=e.color)},[e.value,e.color]),(0,h.jsxs)("div",{className:(0,I.Z)("full-page-slider",{active:e.show}),children:[(0,h.jsx)("div",{className:"title",children:e.title}),(0,h.jsx)("div",{ref:t,children:(0,h.jsx)("div",{className:"rangeslider-wrapper",children:(0,h.jsx)("div",{ref:n,className:"rangeslider-fill"})})})]})};function ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach(function(t){(0,k.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eg=function(e){var t=i.useState(!1),n=(0,N.Z)(t,2),c=n[0],o=n[1],a=i.useState(!1),s=(0,N.Z)(a,2),l=s[0],d=s[1],u=(0,r.I0)(),f=i.useState("#ffffff"),v=(0,N.Z)(f,2),p=v[0],m=v[1],g=i.useState(0),x=(0,N.Z)(g,2),b=x[0],y=x[1],j=i.useState([0,0]),w=(0,N.Z)(j,2),_=w[0],O=w[1],k=i.useRef(null),P=i.useRef(null),S=i.useState(!1),M=(0,N.Z)(S,2),D=M[0],B=M[1];i.useEffect(function(){D||y(e.brightness)},[e.brightness,D]),i.useEffect(function(){if(!e.isGroup&&void 0!==e.hue&&void 0!==e.saturation){var t=ef(e.hue,e.saturation,1),n=(0,N.Z)(t,3),i=n[0],r=n[1],c=n[2];m((0,F.s)({r:i,g:r,b:c,a:1}))}},[e.hue,e.isGroup,e.saturation]),i.useEffect(function(){if(!e.isGroup&&void 0!==e.whiteBalance){var t=et(100*e.whiteBalance),n=(0,N.Z)(t,3),i=n[0],r=n[1],c=n[2];m((0,F.s)({r:i,g:r,b:c,a:1}))}},[e.isGroup,e.whiteBalance]),i.useEffect(function(){k.current&&(k.current.querySelector(".rangeslider-fill").style.backgroundColor=p)},[p]),i.useEffect(function(){P.current&&(e.isOn?P.current.style.width=b+"%":P.current.style.width="0%")},[b,e.isOn]);var Z=(0,eh.QS)({trackMouse:!0,trackTouch:!0,delta:50,onTap:function(){e.isGroup||e.deviceType===E.Y.Dimmer||o(!0)},onSwipeStart:function(){return B(!0)},onSwiping:function(e){"Up"!==e.dir&&"Down"!==e.dir&&(e.event instanceof MouseEvent?e.event&&e.event.clientX&&y(Math.round(Math.min(Math.max(e.event.clientX/(.9*window.innerWidth)*100,0),100))):e.event&&e.event.targetTouches[0]&&e.event.targetTouches[0].clientX&&y(Math.round(Math.min(Math.max(e.event.targetTouches[0].clientX/(.9*window.innerWidth)*100,0),100))),e.first&&(d(!0),O(e.initial)))},onSwiped:function(e){B(!1),d(!1),"Up"!==e.dir&&"Down"!==e.dir&&H("setBrightness",{brightness:b})}}),H=i.useCallback(function(t,n){e.isGroup?[E.Y.Hsv,E.Y.Dimmer,E.Y.Hcl].forEach(function(i){u((0,C.xl)({deviceId:e.tbDeviceId,obj:(0,T.merge)(n,{deviceId:128,deviceType:i}),func:t,broadcast:"manual"}))}):u((0,C.xl)({deviceId:e.tbDeviceId,obj:n,func:t,broadcast:"none"}))},[u,e.isGroup,e.tbDeviceId]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:(0,I.Z)(R().switch,!e.active&&R().dNone),style:{marginBottom:e.isGroup?"13px":0},children:[(0,h.jsxs)("div",em(em({},Z),{},{ref:function(e){Z.ref(e),k.current=e},className:"".concat(R().inputSlider," input-slider"),children:[(0,h.jsx)("p",{className:"pe-none",children:e.deviceName}),(0,h.jsx)("div",{className:"rangeslider-wrapper",children:(0,h.jsx)("div",{ref:P,className:"rangeslider-fill"})})]})),(0,h.jsx)("div",{onClick:function(){return H("setPowerMesh",(0,T.merge)({isOn:!e.isOn}))},className:"".concat(R().switchIcon," icon-ic_onoff ").concat(e.isOn?R().isOn:"")})]}),(0,h.jsx)(ev,{show:l,color:p,title:e.deviceName,value:b,coords:_}),c&&(0,h.jsx)(eu,{hclPicker:e.deviceType===E.Y.Hcl,closeModal:o,brightness:b,setBrightness:function(e){return H("setBrightness",{brightness:e})},setColor:function(e,t){t?H("setColorMesh",{mH:ee(e).h,mV:(0,en.e)(b||.5,0,100,0,255)}):H("setColor",{hue:e.h,saturation:e.s,brightness:b||50})},usedColor:p,name:e.deviceName})]})};function ex(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ex(Object(n),!0).forEach(function(t){(0,k.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ex(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ey=function(e){var t=(0,r.I0)(),n=i.useState(0),c=(0,N.Z)(n,2),o=c[0],a=c[1],s=i.useState(!1),l=(0,N.Z)(s,2),d=l[0],u=l[1],f=i.useState([0,0]),v=(0,N.Z)(f,2),p=v[0],m=v[1],g=i.useRef(null),x=i.useState(!1),b=(0,N.Z)(x,2),y=b[0],j=b[1];i.useEffect(function(){y||a(e.percentage)},[e.percentage,y]),i.useEffect(function(){g.current&&(g.current.style.width=o+"%")},[o]);var w=(0,eh.QS)({trackMouse:!0,trackTouch:!0,delta:50,onSwipeStart:function(){return j(!0)},onSwiping:function(e){"Up"!==e.dir&&"Down"!==e.dir&&(e.event instanceof MouseEvent?e.event&&e.event.clientX&&a(Math.round(Math.min(Math.max(e.event.clientX/(.9*window.innerWidth)*100,0),100))):e.event&&e.event.targetTouches[0]&&e.event.targetTouches[0].clientX&&a(Math.round(Math.min(Math.max(e.event.targetTouches[0].clientX/(.9*window.innerWidth)*100,0),100))),e.first&&(u(!0),m(e.initial)))},onSwiped:function(e){j(!1),u(!1),"Up"!==e.dir&&"Down"!==e.dir&&_("moveShutter",{direction:3,openPercentage:o,changed:0,duration:0})}}),_=i.useCallback(function(n,i){t((0,C.xl)({deviceId:e.tbDeviceId,obj:(0,T.merge)(i,e.isGroup?{deviceId:128,deviceType:E.Y.Shutter}:{}),func:n,broadcast:e.isGroup?"manual":"none"}))},[t,e.isGroup,e.tbDeviceId]),O=i.useCallback(function(t){var n;"up"===t?(n=0,e.channel2&&(n=1)):"down"===t&&(n=2,e.channel1&&(n=1)),_("moveShutter",{direction:n,changed:0,duration:0,usePosition:!0})},[e.channel1,e.channel2,_]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",eb(eb({className:(0,I.Z)(R().switch,!e.active&&R().dNone)},w),{},{style:{marginBottom:e.isGroup?"13px":0},children:[(0,h.jsxs)("div",{className:"".concat(R().inputSlider," input-slider"),children:[(0,h.jsx)("p",{className:"pe-none",children:e.deviceName}),(0,h.jsx)("div",{className:"rangeslider-wrapper",children:(0,h.jsx)("div",{ref:g,className:"rangeslider-fill"})})]}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{onClick:function(){return O("up")},className:"".concat(R().switchIcon," ").concat(e.channel2?R().isOn:""," icon-ic_arrow_up br-0")}),(0,h.jsx)("div",{onClick:function(){return O("down")},className:"".concat(R().switchIcon," ").concat(e.channel1?R().isOn:"","  icon-ic_arrow-down")})]})]})),(0,h.jsx)(ev,{color:"#fff",coords:p,show:d,title:e.deviceName,value:o})]})},ej=function(e){var t=(0,r.I0)(),n=i.useCallback(function(n,i){t((0,C.xl)({deviceId:e.tbDeviceId,obj:(0,T.merge)(i,e.isGroup?{deviceId:128,deviceType:E.Y.Switch}:{}),func:n,broadcast:e.isGroup?"manual":"none"}))},[t,e.isGroup,e.tbDeviceId]);return(0,h.jsxs)("div",{className:(0,I.Z)(R().switch,!e.active&&R().dNone),style:{marginBottom:e.isGroup?"13px":0},children:[(0,h.jsxs)("div",{className:"".concat(R().inputSlider," input-slider"),children:[(0,h.jsx)("p",{className:"pe-none",children:e.deviceName}),(0,h.jsx)("div",{className:"rangeslider-wrapper",children:(0,h.jsx)("div",{style:{width:e.isOn?"100%":"0%"},className:"rangeslider-fill"})})]}),(0,h.jsx)("div",{onClick:function(){e.isGroup?n("setPowerMesh",{isOn:!e.isOn}):void 0!==e.channelIndex&&n("setPower",{channelIndex:e.channelIndex,channelStatus:!e.isOn})},className:"".concat(R().switchIcon," icon-ic_onoff ").concat(e.isOn?R().isOn:"")})]})},ew=n(8501),e_=function(){var e=i.useContext(S.Vo),t=(0,P.ZP)("wss://".concat("https://devdash1.meshle.com".replace(/^https?:\/\//,""),"/api/ws/plugins/telemetry?token=")+e.token),n=t.readyState,c=t.sendJsonMessage,a=t.lastJsonMessage,s=i.useMemo(function(){var e;return(e={},(0,k.Z)(e,P.kQ.CONNECTING,"Connecting"),(0,k.Z)(e,P.kQ.OPEN,"Open"),(0,k.Z)(e,P.kQ.CLOSING,"Closing"),(0,k.Z)(e,P.kQ.CLOSED,"Closed"),(0,k.Z)(e,P.kQ.UNINSTANTIATED,"UnInstantiated"),e)[n]},[n]),l=(0,r.v9)(C.PW),d=i.useRef(new Map),u=(0,i.useState)("light"),f=u[0],v=u[1],m=(0,p.Z)().formatMessage,g=(0,B.x)([{category:"light",data:[]},{category:"switch",data:[]},{category:"shutter",data:[]}]),x=(0,N.Z)(g,2),b=x[0],y=x[1],j=i.useMemo(function(){return b.filter(function(e){return e.data.length}).map(function(e){return e.category})},[b]);i.useEffect(function(){j.length&&!j.includes(f)&&v(j[0])},[f,j]);var w=i.useMemo(function(){return b.reduce(function(e,t){return e+t.data.length},0)},[b]),_=i.useMemo(function(){return b.map(function(e){return e.data.map(function(e){return{tbDeviceId:e.tbDeviceId,deviceType:e.deviceType}})})},[b]),Z=i.useCallback(function(){if("Open"===s){var e={tsSubCmds:[],historyCmds:[],attrSubCmds:[]};_.forEach(function(t){t.forEach(function(t){var n=(0,D.Q3)(t.deviceType);if(n.length){var i=d.current.size+1;d.current.set(i,t.tbDeviceId),e.tsSubCmds.push({entityType:"DEVICE",entityId:t.tbDeviceId,scope:"LATEST_TELEMETRY",cmdId:i,keys:n.reduce(function(e,t){return e+","+t},"").slice(1)})}})}),c(e)}},[JSON.stringify(_),w,s,c]);i.useEffect(function(){Z()},[Z]);var H=(0,i.useCallback)(function(e){y(function(t){var n=e.subscriptionId,i=d.current.get(n);if(void 0!==i){var r=e.data,c=t.reduce(function(e,t){return[].concat((0,O.Z)(e),(0,O.Z)(t.data))},[]),o=c.find(function(e){return e.tbDeviceId===i});if(void 0!==o){var a=o.deviceType,s=(0,D.Q3)(o.deviceType);if(s.forEach(function(e){var t=r[e];if(void 0!==t){var n=t[0];(0,T.set)(o,e,(0,D.BN)(e,n[1]))}}),a===E.Y.Switch){var l=c.find(function(e){return e.deviceType===E.Y.Switch&&e.tbDeviceId===i&&1===e.channelIndex});void 0!==l&&s.forEach(function(e){var t=r[e];if(void 0!==t){var n=t[0];(0,T.set)(l,e,(0,D.BN)(e,n[1]))}})}}}})},[y]),G=i.useCallback(function(e,t,n){var i=(0,D.Q3)(t.deviceType);if(t.deviceType===E.Y.Switch&&(t.channelIndex=0),i.forEach(function(e){var i=n.telemetry[e];if(void 0!==i){var r=i[0];(0,T.set)(t,e,(0,D.BN)(e,r.value))}}),t.deviceType===E.Y.Switch&&(0,T.has)(n.telemetry,"channel1")){var r=e.data.filter(function(e){return e.deviceType===E.Y.Switch}).find(function(e){return e.tbDeviceId===t.tbDeviceId&&1===e.channelIndex});if(void 0===r)return(r=(0,T.merge)({},t,{channelIndex:1})).name=t.name+" channel 2",t.name=t.name+" channel 1",[r];i.forEach(function(e){var t=n.telemetry[e];if(void 0!==t){var i=t[0];(0,T.set)(r,e,(0,D.BN)(e,i.value))}})}},[]);i.useEffect(function(){ew.Z.nullOrUndefined(a)||H(a)},[H,a]),(0,i.useEffect)(function(){0!==l.length&&y(function(e){l.forEach(function(t){var n=(0,D.Cy)(t.name),i=(0,D.dQ)(t.name);if((0,M.wQ)(n)&&!(0,M.SI)(n)){var r=e.find(function(e){return(0,D.VA)(n)===e.category});if(void 0!==r){var c,o=r.data.find(function(e){return e.tbDeviceId===t.id.id&&(e.deviceType!==E.Y.Switch||1!==e.channelIndex)}),a=void 0===o;o=(0,T.merge)({name:t.label,deviceType:n,deviceId:i,tbDeviceId:t.id.id},o),ew.Z.falsy(o.name)&&(o.name=(0,D.lB)(n,i));var s=G(r,o,t);a&&r.data.push(o),void 0!==s&&s.length&&(c=r.data).push.apply(c,(0,O.Z)(s))}}})})},[l,m,G,y]);var R=function(e){if(void 0!==e)switch(e.deviceType){case E.Y.Hsv:case E.Y.Hcl:case E.Y.Dimmer:return(0,h.jsx)(eg,{active:e.active,brightness:(0,en.e)(e.brightness,0,1,0,100),deviceId:e.deviceId,deviceName:e.name,deviceType:e.deviceType,isGroup:(0,M.ty)(e),isOn:e.isOn,tbDeviceId:e.tbDeviceId,hue:e.deviceType===E.Y.Hsv?e.hue:void 0,saturation:e.deviceType===E.Y.Hsv?e.saturation:void 0,whiteBalance:e.deviceType===E.Y.Hcl?e.whiteBalance:void 0},"colorful-device-"+e.tbDeviceId);case E.Y.Shutter:return(0,h.jsx)(ey,{active:e.active,isGroup:(0,M.ty)(e),channel1:e.channel0,channel2:e.channel1,deviceId:e.deviceId,deviceName:e.name,deviceType:e.deviceType,percentage:(0,en.e)(e.percentage,0,1,0,100),tbDeviceId:e.tbDeviceId},"shutter-device-"+e.tbDeviceId);case E.Y.Switch:return(0,h.jsx)(ej,{active:e.active,deviceId:e.deviceId,deviceName:e.name,deviceType:e.deviceType,isGroup:(0,M.ty)(e),isOn:(0,M.ty)(e)?e.isOn:1===e.channelIndex?e.channel1:e.channel0,tbDeviceId:e.tbDeviceId,channelIndex:e.channelIndex},"switch-device-"+e.tbDeviceId+"-channel-"+e.channelIndex);default:return(0,h.jsx)("div",{})}},W=i.useCallback(function(e){switch(e){case"light":return m({id:"app.text.allLights"});case"shutter":return m({id:"app.text.allShutter"});case"switch":return m({id:"app.text.allSwitches"});default:return""}},[m]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:(0,I.Z)(o().devices,o().fullHeight),children:[(0,h.jsx)("br",{}),(0,h.jsx)(Y,{devices:b,category:f,setCategory:v}),(0,h.jsx)("div",{className:o().inputs,children:b.map(function(e,t){if(f===e.category&&e.data.length)return(0,h.jsxs)(i.Fragment,{children:[R((0,D.ZW)(e.data,W(e.category))),e.data.map(R)]},"group-"+t)})})]})})},eO=function(){var e=(0,r.I0)(),t=(0,r.v9)(u.oH).authenticated;return(0,i.useEffect)(function(){t&&e((0,C.LO)())},[t,e]),(0,h.jsx)(S.i1,{children:(0,h.jsx)("div",{className:"theme-wrapper",children:(0,h.jsxs)("div",{className:"theme ".concat(o().container),children:[(0,h.jsx)("div",{className:"blur-white"}),(0,h.jsx)(v,{}),(0,h.jsx)(e_,{}),(0,h.jsx)(_,{})]})})})}},4309:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(2429)}])},9848:function(e){e.exports={deviceBox:"CategoryList_deviceBox__BFwOf",deviceIcon:"CategoryList_deviceIcon__6R4U9",deviceRow:"CategoryList_deviceRow__xmf10",activeBox3:"CategoryList_activeBox3__mRTTP"}},2210:function(e){e.exports={colorPickerWrap:"ColorPicker_colorPickerWrap__1cgpF",colorPickerContainer:"ColorPicker_colorPickerContainer__8ygB_",colorPicker:"ColorPicker_colorPicker__JhD7C",overlay:"ColorPicker_overlay__thmvv",colorBox:"ColorPicker_colorBox__tYzOe",ctaBtn:"ColorPicker_ctaBtn__P7fGX",imprintMain:"ColorPicker_imprintMain__eQF05",imprint:"ColorPicker_imprint__9NAc6"}},7246:function(e){e.exports={footer:"Footer_footer__Tl1eP",imprint:"Footer_imprint__WgqEE",powered:"Footer_powered__KQse4",version:"Footer_version__Y9BeB"}},3695:function(e){e.exports={header:"Header_header__VYZ3G",logo:"Header_logo__6vBZG",dropdown:"Header_dropdown__RsqGw",active:"Header_active__EB8lX",item:"Header_item__wDkPX"}},7160:function(e){e.exports={container:"Home_container__bCOhY",fullHeight:"Home_fullHeight__ewZDU",bgPrimary:"Home_bgPrimary__7cx2Y",scenes:"Home_scenes__MF0XA",devices:"Home_devices__YP7WA",sceneBoxWrap:"Home_sceneBoxWrap__H1beZ",sceneBox:"Home_sceneBox__PHpVd",deviceBox:"Home_deviceBox__q__Lg",deviceIcon:"Home_deviceIcon__DWfGk",deviceRow:"Home_deviceRow__f5rtp",activeBox3:"Home_activeBox3__PTEY6",qrDiv:"Home_qrDiv__HImhx",inputs:"Home_inputs__EJh_j"}},4700:function(e){e.exports={switch:"InputSlider_switch__XOfbN",inputSlider:"InputSlider_inputSlider__RTe3F",switchIcon:"InputSlider_switchIcon__3QRPn",isOn:"InputSlider_isOn__1XaPL",dNone:"InputSlider_dNone__BZmh8",dim:"InputSlider_dim__oNHD1"}}},function(e){e.O(0,[571,675,261,774,888,179],function(){return e(e.s=4309)}),_N_E=e.O()}]);